<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="it">
<head>
<!-- Generated by javadoc (1.8.0_192) on Tue Feb 05 18:40:10 CET 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<title>UsersDB</title>
<meta name="date" content="2019-02-05">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UsersDB";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":9,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UsersDB.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="UserData.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="index.html?UsersDB.html" target="_top">Frames</a></li>
<li><a href="UsersDB.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class UsersDB" class="title">Class UsersDB</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteObject</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteServer</li>
<li>
<ul class="inheritance">
<li>UsersDB</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable, java.rmi.Remote, <a href="SubscribeInterface.html" title="interface in &lt;Unnamed&gt;">SubscribeInterface</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">UsersDB</span>
extends java.rmi.server.RemoteServer
implements <a href="SubscribeInterface.html" title="interface in &lt;Unnamed&gt;">SubscribeInterface</a></pre>
<div class="block">Struttura dati utilizzata per memorizzare gli utenti.
 È composta da una <strong>ConcurrentHashMap</strong> che garantisce
 alta scalabilità alla struttura.
 Chiave della struttura è il <strong>nomeutente</strong> che per costruzione
 è garantito essere univoco, mentre il campo "data 
 è dato dalla struttura <strong>UserData</strong>.
 La classe è costruita attraverso l'uso del pattern Signleton, in modo
 da creare un unica istanza utilizzabile dal Server.
 Tutte le operazioni sono fatte in modo tale da garantire un ottima 
 concorrenza dei metodi.
 La maggior parte delle operazioni sono fatte usando l'operatore: 
 <strong>replace(key,oldValue,newValue)</strong> che è garantito dalla
 dcumentazione Java essere atomico.
 <code>replace</code>.
 <p>
 Viene implementato inoltre il servizio RMI SubUnsuInterface, che è responsabile
 della registrazione degli utenti al servizio.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Stefano Spadola 534919</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="serialized-form.html#UsersDB">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.SubscribeInterface">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;<a href="SubscribeInterface.html" title="interface in &lt;Unnamed&gt;">SubscribeInterface</a></h3>
<code><a href="SubscribeInterface.html#RMIPORT">RMIPORT</a>, <a href="SubscribeInterface.html#SERVICE">SERVICE</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#createFile-java.lang.String-java.lang.String-">createFile</a></span>(java.lang.String&nbsp;nomefile,
          java.lang.String&nbsp;user)</code>
<div class="block">Funzione che aggiunge un file nella lista dei file modificabili/visualizzabili</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#deleteFile-java.lang.String-java.lang.String-">deleteFile</a></span>(java.lang.String&nbsp;nomefile,
          java.lang.String&nbsp;user)</code>
<div class="block">Funzione usata in casi particolari per ripristinare alcuni cambiamenti
 che non garantiscono la consistenza dei dati.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="UserData.html" title="class in &lt;Unnamed&gt;">UserData</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#getData-java.lang.String-">getData</a></span>(java.lang.String&nbsp;key)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="UsersDB.html" title="class in &lt;Unnamed&gt;">UsersDB</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#getIstance--">getIstance</a></span>()</code>
<div class="block">Costruttore Singleton</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#getList-java.lang.String-">getList</a></span>(java.lang.String&nbsp;user)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#logOut-java.lang.String-">logOut</a></span>(java.lang.String&nbsp;user)</code>
<div class="block">Funzione di disconessione</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#logUser-java.lang.String-java.lang.String-java.net.SocketAddress-">logUser</a></span>(java.lang.String&nbsp;user,
       java.lang.String&nbsp;password,
       java.net.SocketAddress&nbsp;saddr)</code>
<div class="block">Metodo responsabile della fase di login utente.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#modifyEntry-java.lang.String-UserData-UserData-">modifyEntry</a></span>(java.lang.String&nbsp;user,
           <a href="UserData.html" title="class in &lt;Unnamed&gt;">UserData</a>&nbsp;oldValue,
           <a href="UserData.html" title="class in &lt;Unnamed&gt;">UserData</a>&nbsp;newValue)</code>
<div class="block">Metodo che modifica una entry (già precedentemente inserita) nella struttura.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="UsersDB.html#subscribe-java.lang.String-java.lang.String-">subscribe</a></span>(java.lang.String&nbsp;user,
         java.lang.String&nbsp;password)</code>
<div class="block">Metodo RMI che esegue la sottoscrizione degli utenti al servizio</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.rmi.server.RemoteServer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteServer</h3>
<code>getClientHost, getLog, setLog</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>equals, getRef, hashCode, toString, toStub</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>getClass, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getIstance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIstance</h4>
<pre>public static&nbsp;<a href="UsersDB.html" title="class in &lt;Unnamed&gt;">UsersDB</a>&nbsp;getIstance()</pre>
<div class="block">Costruttore Singleton</div>
</li>
</ul>
<a name="getList-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getList</h4>
<pre>public&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;getList(java.lang.String&nbsp;user)</pre>
</li>
</ul>
<a name="getData-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getData</h4>
<pre>public&nbsp;<a href="UserData.html" title="class in &lt;Unnamed&gt;">UserData</a>&nbsp;getData(java.lang.String&nbsp;key)</pre>
</li>
</ul>
<a name="subscribe-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subscribe</h4>
<pre>public&nbsp;int&nbsp;subscribe(java.lang.String&nbsp;user,
                     java.lang.String&nbsp;password)
              throws java.rmi.RemoteException</pre>
<div class="block">Metodo RMI che esegue la sottoscrizione degli utenti al servizio</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="SubscribeInterface.html#subscribe-java.lang.String-java.lang.String-">subscribe</a></code>&nbsp;in interface&nbsp;<code><a href="SubscribeInterface.html" title="interface in &lt;Unnamed&gt;">SubscribeInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>user</code> - Nomeutente che vuole sottoscrivere al servizio</dd>
<dd><code>password</code> - la relativa password utilizzata per identificarsi</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 on success || -1 se un utente con lo stesso nome è già registrato</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
<a name="logUser-java.lang.String-java.lang.String-java.net.SocketAddress-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logUser</h4>
<pre>public&nbsp;int&nbsp;logUser(java.lang.String&nbsp;user,
                   java.lang.String&nbsp;password,
                   java.net.SocketAddress&nbsp;saddr)</pre>
<div class="block">Metodo responsabile della fase di login utente.
 In maniera atomica modifica lo stato dell'utente settandolo online.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>user</code> - Nomeutente che vuole sottoscrivere al servizio</dd>
<dd><code>password</code> - la relativa password utilizzata per identificarsi</dd>
<dd><code>saddr</code> - Indirizzo di rete dalla quale si sta collegando</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 on Success || -1 Password sbagliata || -2 L'user non esiste || -3 L'utente è già loggato</dd>
</dl>
</li>
</ul>
<a name="logOut-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logOut</h4>
<pre>public&nbsp;int&nbsp;logOut(java.lang.String&nbsp;user)</pre>
<div class="block">Funzione di disconessione</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>user</code> - Utente che si vuole disconnettere</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0</dd>
</dl>
</li>
</ul>
<a name="createFile-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFile</h4>
<pre>public&nbsp;int&nbsp;createFile(java.lang.String&nbsp;nomefile,
                      java.lang.String&nbsp;user)</pre>
<div class="block">Funzione che aggiunge un file nella lista dei file modificabili/visualizzabili</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nomefile</code> - Nome del file da inserire</dd>
<dd><code>user</code> - Utente che ne fa richiesta</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 on success || -1 se il file esiste già || -2 Se l'user non esiste || -8 Se c'è un problema di concorrenza</dd>
</dl>
</li>
</ul>
<a name="deleteFile-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFile</h4>
<pre>public&nbsp;void&nbsp;deleteFile(java.lang.String&nbsp;nomefile,
                       java.lang.String&nbsp;user)</pre>
<div class="block">Funzione usata in casi particolari per ripristinare alcuni cambiamenti
 che non garantiscono la consistenza dei dati. Usa un while per garantire
 il successo dell'operazione.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nomefile</code> - Nome del file da eliminare</dd>
<dd><code>user</code> - Nome utente che ne fa richiesta</dd>
</dl>
</li>
</ul>
<a name="modifyEntry-java.lang.String-UserData-UserData-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>modifyEntry</h4>
<pre>public&nbsp;boolean&nbsp;modifyEntry(java.lang.String&nbsp;user,
                           <a href="UserData.html" title="class in &lt;Unnamed&gt;">UserData</a>&nbsp;oldValue,
                           <a href="UserData.html" title="class in &lt;Unnamed&gt;">UserData</a>&nbsp;newValue)</pre>
<div class="block">Metodo che modifica una entry (già precedentemente inserita) nella struttura.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>user</code> - è l'Username univoco</dd>
<dd><code>oldValue</code> - è il vecchio valore da sostituire</dd>
<dd><code>newValue</code> - è il nuovo valore da sostituire</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true se va a buon fine, false altrimenti</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UsersDB.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="UserData.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="index.html?UsersDB.html" target="_top">Frames</a></li>
<li><a href="UsersDB.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
